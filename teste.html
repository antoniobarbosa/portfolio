<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Clippy Rig 2D</title>

    <style>
      body {
        background: #202020;
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .character {
        width: 260px;
        height: 260px;
      }
    </style>
  </head>

  <body>
    <div class="character">
      <svg class="clippy" width="260" height="260" viewBox="0 0 200 200">
        <!-- Corpo -->
        <ellipse cx="100" cy="150" rx="60" ry="40" fill="#cfcfcf" />

        <!-- Cabeça -->
        <ellipse cx="100" cy="95" rx="55" ry="50" fill="#e6e6e6" />

        <!-- Olhos -->
        <ellipse class="eye" cx="75" cy="80" rx="20" ry="18" fill="white" />
        <ellipse class="eye" cx="125" cy="80" rx="20" ry="18" fill="white" />

        <!-- Pupilas -->
        <circle id="pupilLeft" cx="75" cy="80" r="8" fill="#333" />
        <circle id="pupilRight" cx="125" cy="80" r="8" fill="#333" />

        <!-- Boca -->
        <path
          id="mouth"
          d="M70,120 Q100,130 130,120"
          stroke="#333"
          stroke-width="5"
          fill="transparent"
          stroke-linecap="round"
        />
      </svg>
    </div>

    <script>
      // ======== OLHOS SEGUINDO O MOUSE ========
      const left = document.getElementById("pupilLeft");
      const right = document.getElementById("pupilRight");

      document.addEventListener("mousemove", (e) => {
        // valor entre -1 e 1 baseado na posição
        const normX = (e.clientX / window.innerWidth - 0.5) * 20;
        const normY = (e.clientY / window.innerHeight - 0.5) * 20;

        left.setAttribute("cx", 75 + normX);
        left.setAttribute("cy", 80 + normY);

        right.setAttribute("cx", 125 + normX);
        right.setAttribute("cy", 80 + normY);
      });

      // ======== BOCA FALANDO ========
      const mouth = document.getElementById("mouth");

      function talkOnce() {
        mouth.setAttribute("d", "M70,120 Q100,150 130,120"); // abre
        setTimeout(() => {
          mouth.setAttribute("d", "M70,120 Q100,130 130,120"); // fecha
        }, 200);
      }

      // exemplo: falar a cada 3 segundos
      setInterval(talkOnce, 3000);

      // ======== PISCAR ========
      const eyes = document.querySelectorAll(".eye");

      function blink() {
        eyes.forEach((e) => e.setAttribute("ry", 2)); // fecha
        setTimeout(() => {
          eyes.forEach((e) => e.setAttribute("ry", 18)); // abre
        }, 150);
      }

      // piscar aleatoriamente
      setInterval(blink, 2700 + Math.random() * 1500);
    </script>
  </body>
</html>
